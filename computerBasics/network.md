# 网络

## OSI七层模型

![network-osi](/images/network-osi.png "network-osi")

## 应用层

向用户提供应用服务时通信的活动

### HTTP协议

包括FTP、DNS、HTTP、SMTP、POP3等，主要解决如何包装数据，以及如何标识数据内容。

## 传输层

提供处于网络连接中的两台计算机之间的数据传输

### TCP协议

提供可靠的字节流服务，采用三次握手建立一个连接。

#### 三次握手

![network-tcp1](/images/network-tcp1.png "network-tcp1")

目的：确认双方的接收能力和发送能力是否正常、指定自己的初始化序列号为后面的可靠性传送做准备。

1. 客户端发送SYN报文到服务器端发起握手，发送完之后客户端处于SYN_SEND状态。
2. 服务端收到SYN报文之后回复SYN和ACK报文给客户端
3. 客户端收到SYN和ACK，向服务端发送一个ACK报文，客户端转为established状态，此时服务端收到ACK报文后也处于established状态，TCP连接建立成功。

#### 四次挥手

![network-tcp2](/images/network-tcp2.jpg "network-tcp2")

目的：断开连接

1. 客户端发送一个FIN报文，报文中会指定一个序列号，此时客户端处于FIN_WAIT_1状态。
2. 服务端收到FIN报文之后，会发送一个ACK报文，且把客户端的序列号+1作为ACK报文的序列号，此时服务端处于CLOSE_WAIT状态。
3. 如果服务端也想断开连接了，和客户端的第一步一样，发送一个FIN报文给客户端。
4. 客户端收到FIN报文之后，向服务端发送ACK报文，且把服务端的序列号+1作为自己ACK报文的序列号，此时客户端处于TIME_WAIT状态。

服务端收到ACK报文之后，就处于关闭连接了，客户端等待了2MSL之后也会关闭连接。

#### 常见的TCP请求方法

1. GET：请求获取URL位置的资源
2. HEAD：请求获取URL位置资源的响应消息报告，即获得该资源的头部信息
3. POST：请求向URL位置的资源后附加新的数据
4. PUT：请求向URL位置存储一个资源，覆盖原URL位置的资源
5. PATCH：请求局部更新URL位置的资源，即改变该处资源的部分内容
6. DELETE：请求删除URL位置存储的资源

### UDP协议

提供面向事务的简单不可靠信息传送服务，不需要建立连接。

### TCP和UDP区别

![network-tcpudp](/images/network-tcpudp.png "network-tcpudp")

## 网络层

负责：处理网络上流动的数据包，规划数据通过网络中的路由和交换设备到达目标计算机。

工作：增加MAC地址转发给数据链路层，进行流量控制，拥塞控制等。

### IP协议

负责把数据从一台计算机通过网络发送到另一台计算机，数据被分割成一小段一小段进行传输，每一段都包括发送端和接收端的IP地址。

## 数据链路层

负责：处理网络层传下来的IP数据报，进一步划分成帧，并传输给物理层。

工作：进行CRC检测，差错控制等。

## 物理层

负责：利用传输介质为数据链路层提供物理连接。

工作：定义物理设备如何传输数据。

<!-- ## 状态码

### 成功状态码 -->


